<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/GioHang.css">
    <link rel="stylesheet" href="/static/login.css">
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
        crossorigin="anonymous">
    <script
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
        crossorigin="anonymous"></script>
    <title>Gi·ªè h√†ng</title>
</head>
<body>

    <!--Header-->
    <header>
        <div class="left-header">
          <div class="logo">üìö Book_shop</div>
          <nav>
            <!-- <a href="/">Trang Ch·ªß</a> S·ª≠a ƒë∆∞·ªùng d·∫´n -->
            <a href="/">Trang Ch·ªß</a>
            <a href="#">Combo gi·∫£m gi√°</a>
            <a href="#">Th·ªÉ Lo·∫°i</a>
            <a href="/cart">Gi·ªè H√†ng</a>
          </nav>
        </div>
        <div class="search-login">
          <input type="text" placeholder="N·ªôi dung t√¨m ki·∫øm">
          <button class="btn-tim">T√¨m</button>
          <!-- <a href="/login"><button class="btn-dangnhap">ƒêƒÉng nh·∫≠p</button></a> ƒê√É S·ª¨A -->
          {% if is_logged_in %}
            <span>Xin ch√†o, {{ username }}!</span>
            <a href="/logout"><button class="btn-dangnhap">ƒêƒÉng xu·∫•t</button></a>
          {% else %}
            <a href="/login"><button class="btn-dangnhap">ƒêƒÉng nh·∫≠p</button></a>
          {% endif %}
        </div>
      </header>
    

    <div class="cart-container">
        <span style="margin-left: 50px; font-size: 30px;">Gi·ªè h√†ng c·ªßa b·∫°n:</span>
        <span style="margin-inline-start: 540px; font-size: 25px;">T·ªïng ti·ªÅn: <span id="total-price">1000000</span> VNƒê</span>
        <hr style="width: 90%; margin: auto; margin-bottom: 20px;margin-top: 20px;">
        
        <div class="cart-item">
            <div class="item-info">
                <input type="checkbox" class="item-checkbox" onclick="updateTotalPrice()">
                <img src="/static/images/Banner.png" alt="S√°ch" class="item-image">
                <div class="info-text">
                    <p>Th√¥ng tin s·∫£n ph·∫©m:</p>
                    <p>Gi√° ti·ªÅn: 100000 VNƒê</p>
                    <p>S·ªë l∆∞·ª£ng: 1</p>
                    <p>lo·∫°i: S√°ch</p>
                </div>
            </div>
            <div class="item-total">
                <p>Thanh ti·ªÅn: <span class="item-total-price">100000</span> VNƒê</p>
                <button class="payment-button" onclick="payTotal()">Thanh To√°n</button>
            </div>
        </div>

        <div class="cart-item">
            <div class="item-info">
                <input type="checkbox" class="item-checkbox" onclick="updateTotalPrice()">
<img src="/static/images/Banner.png" alt="S√°ch" class="item-image">
                <div class="info-text">
                    <p>Th√¥ng tin s·∫£n ph·∫©m:</p>
                    <p>Gi√° ti·ªÅn: 200000 VNƒê</p>
                    <p>S·ªë l∆∞·ª£ng: 2</p>
                    <p>lo·∫°i: S√°ch</p>
                </div>
            </div>
            <div class="item-total">
                <p>Thanh ti·ªÅn: <span class="item-total-price">400000</span> VNƒê</p>
                <button class="payment-button" onclick="payTotal()">Thanh To√°n</button>
            </div>
        </div>

        <div class="cart-item">
            <div class="item-info">
                <input type="checkbox" class="item-checkbox" onclick="updateTotalPrice()">
                <img src="/static/images/Banner.png" alt="S√°ch" class="item-image">
                <div class="info-text">
                    <p>Th√¥ng tin s·∫£n ph·∫©m:</p>
                    <p>Gi√° ti·ªÅn: 200000 VNƒê</p>
                    <p>S·ªë l∆∞·ª£ng: 2</p>
                    <p>lo·∫°i: S√°ch</p>
                </div>
            </div>
            <div class="item-total">
                <p>Thanh ti·ªÅn: <span class="item-total-price">400000</span> VNƒê</p>
                <button class="payment-button" onclick="payTotal()">Thanh To√°n</button>
            </div>
        </div>

        <!-- T·ªïng thanh to√°n -->
        <div class="total-payment">
            <button class="btn btn-success" onclick="payTotal()">Thanh To√°n T·ªïng</button>
        </div>
    </div>

    <!--Footer-->
    <div class="footer py-4">
        <hr />
        <div class="container">
            <div class="row g-4">  
                <div class="col-md-4">
                    <div class="h5 fw-bold mb-3">BookSach_360.vn</div>
                    <div class="social-icons">
                        <a href="#" class="me-2"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="me-2"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="me-2"><i class="bi bi-youtube"></i></a>
                        <a href="#" class="me-2"><i class="bi bi-instagram"></i></a>
                    </div>
                </div>

                <div class="col-md-4">
                    <ul class="list-unstyled">
                        <li class="mb-2">Li√™n h·ªá: quanlysach_360@gmail.com</li>
                        <li class="mb-2">Quy ƒë·ªãnh giao h√†ng</li>
                        <li class="mb-2">Quy ƒë·ªãnh tr·∫£ h√†ng</li>
                    </ul>
                </div>

                <div class="col-md-4">
                    <ul class="list-unstyled">
                        <li class="mb-2">Ch√≠nh s√°ch ho·∫°t ƒë·ªông</li>
                        <li class="mb-2">Ch√≠nh s√°ch tr·∫£ h√†ng</li>
                        <li class="mb-2">Ch√≠nh s√°ch b·∫£o m·∫≠t</li>
                    </ul>
                </div>
            </div>
        </div>
        <script>
            // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn khi thay ƒë·ªïi checkbox
            function updateTotalPrice() {
                let total = 0;
                document.querySelectorAll('.cart-item').forEach(function(item) {
                    const checkbox = item.querySelector('.item-checkbox');
                    if (checkbox.checked) {
                        const price = parseInt(item.querySelector('.item-total-price').textContent);
                        total += price;
                    }
                });
                document.getElementById('total-price').textContent = total;
            }
    
            // X√°c nh·∫≠n thanh to√°n
            function payTotal() {
                let totalAmount = document.getElementById('total-price').textContent;
                // Hi·ªÉn th·ªã h·ªôp tho·∫°i x√°c nh·∫≠n
                let confirmMessage = `B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën thanh to√°n t·ªïng s·ªë ti·ªÅn: ${totalAmount} VNƒê?`;
                if (confirm(confirmMessage)) {
                    alert("Thanh to√°n th√†nh c√¥ng!");
                } else {
                    alert("H·ªßy thanh to√°n.");
                }
            }
    
            
        </script><script>
        // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn khi ch·ªçn/b·ªè ch·ªçn s·∫£n ph·∫©m
        function updateTotalPrice() {
            let total = 0;
            document.querySelectorAll('.cart-item').forEach(function(item) {
                const checkbox = item.querySelector('.item-checkbox');
                if (checkbox.checked) {
                    const price = parseInt(item.querySelector('.item-total-price').textContent);
                    total += price;
                }
            });
            document.getElementById('total-price').textContent = total;
        }
    
        // H√†m thanh to√°n
        function payTotal() {
            // T√≠nh t·ªïng ti·ªÅn s·∫£n ph·∫©m ƒë√£ ch·ªçn  
            let totalAmount = document.getElementById('total-price').textContent;
    
            // Ki·ªÉm tra n·∫øu ch∆∞a ch·ªçn s·∫£n ph·∫©m n√†o
            if (parseInt(totalAmount) === 0) {
                alert("B·∫°n ch∆∞a ch·ªçn s·∫£n ph·∫©m n√†o ƒë·ªÉ thanh to√°n!");
                return;
            }
    
            // Hi·ªÉn th·ªã h·ªôp tho·∫°i x√°c nh·∫≠n thanh to√°n
            let confirmMessage = `B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën thanh to√°n t·ªïng s·ªë ti·ªÅn: ${totalAmount} VNƒê?`;
            if (confirm(confirmMessage)) {
                alert("Thanh to√°n th√†nh c√¥ng!");
    
                // X√≥a c√°c s·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c ch·ªçn
                const selectedItems = document.querySelectorAll('.cart-item');
                selectedItems.forEach(function(item) {
                    const checkbox = item.querySelector('.item-checkbox');
                    if (checkbox.checked) {
                        item.remove();
                    }
                });
    
                // C·∫≠p nh·∫≠t l·∫°i t·ªïng ti·ªÅn sau khi x√≥a
                updateTotalPrice();
            } else {
                alert("H·ªßy thanh to√°n.");
            }
        }
    </script><script>
        function loadCart() {
          let cart = JSON.parse(localStorage.getItem("cart")) || [];
          let cartTable = document.getElementById("cartTableBody");
    √°
    let total = 0;
      
          cartTable.innerHTML = "";
      
          if (cart.length === 0) {
            cartTable.innerHTML = "<tr><td colspan='4'>Gi·ªè h√†ng tr·ªëng</td></tr>";
          } else {
            cart.forEach(item => {
              let itemTotal = item.price * item.quantity;
              total += itemTotal;
      
              cartTable.innerHTML += `
                <tr>
                  <td>${item.title}</td>
                  <td>${item.price.toLocaleString()}‚Ç´</td>
                  <td>${item.quantity}</td>
                  <td>${itemTotal.toLocaleString()}‚Ç´</td>
                </tr>
              `;
            });
          }
      
          document.getElementById("cartTotal").innerText = total.toLocaleString() + "‚Ç´";
        }
      
        window.onload = loadCart;
      </script>
      
    
    </body>
    </html>
